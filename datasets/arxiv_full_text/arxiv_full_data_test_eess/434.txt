{"title": "A Practical Guide to Multi-image Alignment", "tag": "eess", "abstract": " Multi-image alignment, bringing a group of images into common register, is an ubiquitous problem and the first step of many applications in a wide variety of domains. As a result, a great amount of effort is being invested in developing efficient multi-image alignment algorithms. Little has been done, however, to answer fundamental practical questions such as: what is the comparative performance of existing methods? is there still room for improvement? under which conditions should one technique be preferred over another? does adding more images or prior image information improve the registration results? In this work, we present a thorough analysis and evaluation of the main multi-image alignment methods which, combined with theoretical limits in multi-image alignment performance, allows us to organize them under a common framework and provide practical answers to these essential questions. ", "text": "approach recovering latent image ﬁrst estimating multiple shifts averaging unshifted noisy observations. approaches circumvent shift estimation step directly rely shift-invariant features estimating latent image work focus problem multiple shift estimation solely even side product estimation underlying image. indeed many applications estimating shifts itself since example could combine images later image processing pipeline. simplest approach multi-image shift estimation pairwise alignment image chosen reference. however given input images share underlying scene independent joint alignment mostly signal-to-noise ratio conditions pairwise alignment noisy improve results. main approaches multi-image alignment include maximum likelihood estimator different optimization strategies bayesian maximum posteriori estimator different optimization strategies constrained alignment algorithms originally introduced super-resolution problem. multi-image alignment setting show approaches mathematically equivalent sense optimize similar functional main difference whether include prior image model chosen optimization technique. presented theoretical analysis fundamental limits multi-image alignment analyzed performance respect bounds. although achieves maximum performance high theory practice medium conditions. work conducted thorough experimental analysis help close performance wide range conditions. show images image prior extremely useful enabling alignment challenging conditions otherwise possible. indeed compared methods rely prior image information perform close theoretical bounds showing little room left improvement. article organized follows. section details analyzed methods section presents empirical evaluation real synthetic data. section summarizes conclusions. observed i-th image pixel position underlying continuous image translation vector frame respect independent additive gaussian noise variance practice access digital images sampled multi-image alignment bringing group images common register ubiquitous problem ﬁrst step many applications wide variety domains. result great amount effort invested developing efﬁcient multi-image alignment algorithms. little done however answer fundamental practical questions comparative performance existing methods? still room improvement? conditions technique preferred another? adding images prior image information improve registration results? work present thorough analysis evaluation main multi-image alignment methods which combined theoretical limits multi-image alignment performance allows organize common framework provide practical answers essential questions. multi-image alignment consists bringing group images common reference. ubiquitous problem ﬁrst step many applications high dynamic range imaging super-resolution burst deblurring burst denoising appears wide variety domains computational photography biomedical imaging astronomy many remote sensing applications alignment errors highly affect ﬁnal result. instance computational photography applications imaging ghosting artifacts appear incorrect alignment extremely perturbing observer often voiding completely utility main technique. biomedical imaging alignment quality often limits resolution structures reconstruction detection segmentation several techniques proposed tackle multi-image alignment problem great amount effort invested improving results even further. still fundamental practical aspects multi-image registration problem received much less attention. instance comparative performance existing methods? much improvement expect images incorporate image priors? work present comprehensive study main multi-image alignment methods allows organize common framework provide answers essential questions. focus rigid translations which despite simple basis many models used practice. instance complex scenes objects move independently often make sound hypothesis background suffers global translation even nonrigid transformations locally approximated translations. discrete grid. assume images band-limited sampled according nyquist sampling theorem. concatenation unknown translations concatenation observed images. goal multi-image alignment techniques estimate equivalently fourier domain model becomes ˜ue−iωωω·τττ denotes image fourier transforms represents fourier spatial frequency denotes inner product operation. main methods multi-image translation estimation classiﬁed categories depending whether include prior image information not. among methods include image prior different optimization strategies constrained alignment methods among including image prior estimator different optimization strategies bayesian maximum likelihood estimator given independent images following model assuming unknown deterministic image value maximizes loglikelihood samples bu|| shift operator shannon interpolation operator veriﬁes functional example separable non-linear least-square problem. given shifts unknown underlying image given least squares solution average aligned frames. inserting back functional depends shifts functional non-convex different approaches followed local minimum consider approaches cyclic coordinate descent variable projections. cyclic coordinate descent consists optimizing coordinate time. main steps iterated ﬁrst compute average frames aligned current estimate shifts second shift minimizing euclidean distance corresponding image average. variable projections makes fact minimizing equivalent robinson proposed compute maximizing method named variable projections. super-resolution problem claim optimization several advantages compared cyclic coordinate descent approach since converges fewer iterations minima better deﬁned. bayesian maximum likelihood estimator assume underlying image modeled stationary zero-mean gaussian process spectral density σσσuf σσσu covariance matrix fourier operator. hypothesis considered hidden variable marginalized samples log-likelihood. unknown shifts computed fbft fourier equivalent shift operator iσ)−su wiener ﬁlter identity matrix. notice difference bayesian maximum likelihood estimator wiener ﬁlter appears introduction image prior. maximum posteriori alternative incorporate image prior compute estimator. given independent samples following model assuming drawn zeromean gaussian process spectral density value maximizes posterior probability wiener ﬁlter deﬁned before. hence bmle optimize cost function. common framework. often presented different techniques showed previously presented multiimage alignment approaches optimize cost function whether methods without image prior equal wiener ﬁlter methods including image prior. nevertheless given functional convex results vary depending optimization strategy initialization procedure. constrained alignment. another aligning multiple images possible pairwise estimations redundancy accurate self-consistent shifts purpose pairwise shifts frames ﬁrst computed locating maximum value correlation map. then estimates combined making fact summation shift vectors intermediate adjacent frames bij. shifts found solving over-determined linear equations equations unknowns) obtained determining possible shifts frames. similar approach proposed farsiu incorporate coherence constraint optimization shifts directly. theoretical performance limits. presented theoretical study deriving different statistical performance bounds translations estimation accuracy multi-image alignment. cram´errao bound assumption underlying image follows natural image prior derived. gives lower bound mean square error unbiased estimator shifts different behaviors alignment accuracy identiﬁed depending input images. high performance bound independent number images prior information attains bound. pairwise alignment using optimal case. high moderate increasing number images improve performance. interestingly theory predicts existence threshold performance degrades briskly lower limit value fig. natural images used ground-truth comparison optimization initialization strategies images. performance comparison constrained alignment applied wiener ﬁltered images. displayed performance benchmark alignment possible. nevertheless increasing number images push back thresholds several making alignment possible much challenging conditions. natural images performance close tight. possible reason non-optimality critical drawback image prior information. moreover region performance clearly improves increasing number images. including prior image information example bayesian approach minimizing expected computing maximum posteriori could help close fundamental limits performance. synthetic data experimental setup sets images generated following model taking ground-truth examples fig. different noise levels number shifted images. types motion considered uniformly distributed independent shifts drift-driven trajectories often observed biomedical applications image bursts capture hand-held cameras among others. image prior estimator stationary zero-mean gaussian process spectral density decays inverse squared fourier frequency prior widely used locally modeling natural images experiments repeated times level mean conﬁdence intervals reported. methods almost unbiased deﬁned ratio total energy derivative ground-truth image noise power optimization initialization solved using cyclic coordinate descent variable projections. optimizations initialized using random shifts well pairwise alignment fig. shows results images random shifts trajectory. high conditions signiﬁcant performance differences optimizations initialization strategies. lower levels however cyclic coordinate descent optimization seems slightly better variable projections pairwise alignment initialization considerably outperforms random initialization. approach signiﬁcant differences found tested conﬁgurations levels. image prior fig. compares performance cyclic coordinate descent initialized using pairwise alignment constrained alignment estimator applied wiener preﬁltered images results compared cram´er-rao lower bound gives lower bound variance unbiased estimator shifts therefore establishing performance benchmark. computed assuming image prior estimator details). high methods perform similarly close meaning extra information provided image prior useful. moderate levels however clear performance improvement observed estimator reduces limit predicted crb. even importantly including image prior pushes back several threshold alignment performance degrades dramatically hence including image prior enables alignment challenging noise conditions otherwise possible. number images fig. shows comparison different number images similarly observed image prior increasing number images effect high conditions. lower increasing number images improves results map. interesting remark however performance gain given including image prior much larger increasing number images. indeed estimator images performs considerably better images. fig. shows ratio performance different conﬁgurations. increasing number images produces higher improvement importantly improvement much larger including image prior showing larger gain smaller particularly interesting practical perspective given increased complexity thus time requirements increasing number images opposed almost costless inclusion appropriate image prior. attain fig. shows absolute value difference shift estimates obtained without image prior different patch sizes different number images estimations similar patch sizes effects number images fig. compares quality estimated shifts using versus images patch size purpose show average images aligned using shifts obtained using result multi-image alignment sharper pairwise alignment showing clear performance improvement obtained using images. conducted thorough analysis multi-image shift estimation methods. showed different optimization techniques optimize functional main difference being inclusion prior image information. conducted experimental analysis conﬁrmed per-region behavior depending conditions predicted theoretical analysis fundamental limits multi-image alignment performance high evaluated methods perform similarly close cram´er-rao lower bound. hence simplest methods already achieve best possible performance condition including prior image information images improve alignment result. moderate however show clear performance gain including image prior using images. gain twofold reduced importantly threshold performance degrades dramatically pushed back several dbs. therefore conditions including images image prior makes alignment possible conditions otherwise possible. performance gain obtained including image prior larger increasing number images. important practical perspective given increased complexity therefore time requirements increasing number images opposed almost costless inclusion image prior. indeed found methods include image prior perform close larger range showing little room left improvement close moderate snr. regarding optimization initialization slight differences observed conditions seem critical aspect. finally predicted theory observe existence threshold none evaluated methods manages align images neither images image prior revert situation. increasing e.g. increasing image size without image prior. evaluate applicability previous results real data compare alignment performance burst denoising task burst denoising correct alignment essential obtain good ghosting-free results. experimental setup image bursts acquired light conditions hand-held sony camera burst denoising performed aligning averaging groups images. images aligned using solved cyclic coordinate descent considering image prior before. different levels alignment performed using sub-image varying size gradient content increases patch size thus reproducing conditions increasing snr. shifts estimated using channel applied channels demosaicking. effects image prior fig. shows example results obtained images alignment performed using sub-region pixels. case alignment possible without image prior becomes feasible including fig. shows extract results obtained using different patch sizes. ﬁrst second rows show result withimage prior respectively. smallest patch sizes noise high almost gradient patch representing cases snr. even challenging conditions image prior enables alignment patch. result conﬁrms observed section showed threshold alignment performance degrades dramatically pushed back including image prior. patch size gradient content already visible alignment possible without image prior. nevertheless quality difference still clear. patch sizes difference almost indistinguishable. also predicted results obtained section since high methods agree nathan woods nikolas galatsanos aggelos katsaggelos stochastic methods joint registration restoration interpolation multiple undersampled images ieee trans. image process. vol. russell hardie kenneth barnard ernest armstrong joint registration high-resolution image estimation using sequence undersampled images ieee trans. image process. vol. michael elad yacov hel-or fast super-resolution reconstruction algorithm pure translational motion common space-invariant blur ieee trans. image process. vol. anat levin yael weiss frederic durand william freeman understanding evaluating blind deconvolution algorithms proc. ieee conf. comput. vis. pattern recog. netalee efrat daniel glasner alexander apartsin boaz nadler anat levin accurate blur models image priors single image super-resolution proc. ieee int. conf. comput. vis. cecilia aguerrebere julie delon yann gousseau pablo mus´e simultaneous image reconstruction denoising dynamic scenes proc. ieee int. conf. comput. photogr. dirk robinson sina farsiu peyman milanfar optimal registration aliased images using variable projection applications super-resolution comput. vol. toni buades yifei jean-michel morel zhongwei tang note multi-image denoising proc. local non-local approx. image proc. john rubinstein marcus brubaker alignment cryo-em movies individual particles optimization image translations struct. biol. vol. alberto bartesaghi doreen matthies soojay banerjee alan merk sriram subramaniam structure β-galactosidase resolution obtained cryo-electron microscopy proc. natl. acad. sci. u.s.a. vol. xueming paul mooney shawn zheng christopher booth michael braunfeld sander gubbens david agard yifan cheng electron counting beam-induced motion correction enable near-atomic-resolution single-particle cryo-em nat. methods vol. afonso bandeira moses charikar amit singer andy multireference alignment using semideﬁnite programming proceedings conference innovations theoretical computer science.", "year": "2018"}