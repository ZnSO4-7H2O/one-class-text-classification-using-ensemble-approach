{"title": "High-Precision Measurement of Sine and Pulse Reference Signals using  Software-Defined Radio", "tag": "eess", "abstract": " This paper addresses simultaneous, high-precision measurement and analysis of generic reference signals by using inexpensive commercial off-the-shelf Software Defined Radio hardware. Sine reference signals are digitally down-converted to baseband for the analysis of phase deviations. Hereby, we compare the precision of the fixed-point hardware Digital Signal Processing chain with a custom Single Instruction Multiple Data (SIMD) x86 floating-point implementation. Pulse reference signals are analyzed by a software trigger that precisely locates the time where the slope passes a certain threshold. The measurement system is implemented and verified using the Universal Software Radio Peripheral (USRP) N210 by Ettus Research LLC. Applying standard 10 MHz and 1 PPS reference signals for testing, a measurement precision (standard deviation) of 0.36 ps and 16.6 ps is obtained, respectively. In connection with standard PC hardware, the system allows long-term acquisition and storage of measurement data over several weeks. A comparison is given to the Dual Mixer Time Difference (DMTD) and Time Interval Counter (TIC), which are state-of-the-art measurement methods for sine and pulse signal analysis, respectively. Furthermore, we show that our proposed USRP-based approach outperforms measurements with a high-grade Digital Sampling Oscilloscope. ", "text": "simpliﬁed sine wave reference signal model given equation consisting perfect sine wave reference frequency time-variant phase error term neglecting signal levels noise sine wave reference signals used relative time synchronization meaning drift time base reference signal time base synchronized system occur. usually achieved using phase locked loop lock internal clock measurement system reference signal. case radio frequency measurement devices local oscillators also locked reference signal improve frequency accuracy enable phase coherence. reference frequency depend intended application signals enjoy widespread device support alternative choices. although applications rely sine waves rectangular signals instead. fortunately considerations sine waves apply rectangular signals well since latter transformed former means band-pass ﬁlter. simpliﬁed pulse signal model given equation consisting pulse waveform convolved inﬁnite series dirac pulses equally spaced tperiod apart except time error signal’s timing accuracy depends rise-time inversely proportional bandwidth. signal bandwidth always ﬁnite free discontinuities simple signal model given order low-pass characteristic. model oversimpliﬁcation shows typical characteristics pulse signals namely ﬁnite rise-time transient overshoots. abstract—this paper addresses simultaneous high-precision measurement analysis generic reference signals using inexpensive commercial off-the-shelf software deﬁned radio hardware. sine reference signals digitally down-converted baseband analysis phase deviations. hereby compare precision ﬁxed-point hardware digital signal processing chain custom single instruction multiple data ﬂoating-point implementation. pulse reference signals analyzed software trigger precisely locates time slope passes certain threshold. measurement system implemented veriﬁed using universal software radio peripheral ettus research llc. applying standard reference signals testing measurement precision obtained respectively. connection standard hardware system allows long-term acquisition storage measurement data several weeks. comparison given dual mixer time difference time interval counter state-of-the-art measurement methods sine pulse signal analysis respectively. furthermore show proposed usrp-based approach outperforms measurements high-grade digital sampling oscilloscope. index terms—phase measurement time measurement digital signal processing measurement techniques software deﬁned radio computerized instrumentation reference signal pulse second time domain analysis time interval counter dual mixer time difference measurements required meet demanding timing frequency precision constraints. either single device coupled accurate external reference multiple devices synchronized using appropriately distributed reference signal. particularly challenging example synchronization spatially distributed measurement setup necessitating multiple references location measurement. exemplary frequency standards used generate highly precise reference signals atomic clocks disciplined oscillators standards usually output sine wave pulse signal lab-grade measurement devices inputs signal types. coypright ieee. personal material permitted. permission ieee must obtained uses current future media including reprinting/republishing material advertising promotional purposes creating collective works resale redistribution servers lists reuse absolute time synchronization requires signal types reference signal measurement system compare signal types reference sources simultaneously. digital circuit used measure time difference ∆tpulse pulse signals’ rising edges. basic implementation relies high-frequency digital clock gated digital circuitry responsible pulse detection. clock cycles rising edges counted determine ∆tpulse. therefore tic’s resolution accuracy depends digital clock. figure illustrates operation non-interpolating tic. time resolution signiﬁcantly improved cost increased system complexity implementing interpolating fundamentally time difference sine waves’ zero-crossings measured using tic. however instead using original reference signal frequency would require highly accurate high-frequency digital clock sine wave reference signal down-converted ease constraints tic. figure shows typical dmtd block diagram illustrating principle. pulse signals complement sine wave reference signals enabling absolute time synchronization. typically called pulse second signal tperiod second used. example using gpsdo source rising edge signal coincides coordinated universal time second. measurement device accurately synchronized full seconds using signal less precise mechanism e.g. network time protocol gpsdo’s serial output used achieve absolute synchronization utc. reference signal generators purpose-built provide highly stable signals thus contain high-grade oscillators. easily outperform laboratory measurement equipment attempting judge stability reference signal using measurement device inferior clock would defeat purpose measurement. therefore quality reference signals gauged directly comparing reference signals eliminating need highly-precise measurement clock. instead building custom measurement hardware commercial measurement gear equipped analog-to-digital converters sample reference signals subsequent digital signal processing perform time-difference measurement could used. novel idea published recently sherman j¨ordens well paper extension initial contribution. parties describe measurement systems utilize inexpensive software deﬁned radios general-purpose sampling platforms built-in capabilities extensive progammability. however described algorithms hardware-independent implemented sampling platform enables real-time ofﬂine access sampled data. sine wave algorithm analog dmtd counterpart share core principle namely frequency down-conversion subsequent phase measurement. however dmtd relies upon real-valued down-conversion requiring zero-crossing detection phase-measurement. thereby measurement rate resolution restricted according chosen beat frequency signiﬁcant limitation overcome algorithm’s complex down-conversion real-valued input signals numerically controlled oscillator frequency utilized transfer oscillator. low-pass ﬁlter required suppress potentially interfering signal components i.e. image upconverted bias. suggest choosing result beat frequency measured signal’s phase error equal phase angle complex signal. otherwise phase angle contribution must subtracted necessary unable exactly synthesize required equations analytic description. algorithm yields valid measurement every sample input data depending intended application output samples used e.g. compute phase noise power-spectral density. alternatively sample rate decreased means decimation sherman j¨ordens suggest non-zero beat frequency without giving explanation choice. assume adopted real-valued processing performed analog dmtd systems. although small non-zero shouldn’t affect measurement logical choice complex-valued down-conversion used. real-valued down-conversion analog mixing circuit transfer oscillator frequency employed down-shift reference signal frequency intermediate frequency so-called beat frequency ft|. low-pass ﬁlter applied eliminate interfering signal components bias) reduce noise bandwidth resulting beat signal fig. exemplary dual mixer time difference beat signals downconversion low-pass ﬁltering note zerocrossings period time-difference consecutive zerocrossings ∆ttic measured using tic. concluded figure beat frequency determines amount zero-crossings thus measurements second also dictates heterodyne factor quantiﬁes resolution gain tic’s native resolution fig. illustration pulse signal edge estimation algorithm combining low-pass interpolation linear interpolation. plot shows sampled edge synthesized using equation low-pass interpolated samples note low-pass interpolation improves accuracy subsequent linear interpolation. used applications. highly conﬁgurable programmable usually offer capability field programmable gate array box. although sdrs rely local oscillators analog up/downconversion achieve wide range selectable bands offer direct baseband access adcs and/or digital-to-analog converters baseband sdrs supports digital up/downconversion decimators/interpolators enable conﬁgurable sample rates. figure illustrates typical baseband chain however computed phase error relative implicitly driven sampling clock inadequate gauge high-performance reference oscillators. compare reference sources other complex signals divided yielding complex residual signal. figure illustration algorithm. limited reference signals synchronization. ieee standard c..- addresses synchronous phasor measurements power grids. non-normative annex deﬁnes measurement algorithm also based complex down-conversion digital domain. synchronous phasor measurements must provide fast response times approach tuned high precision applying rigorous baseband ﬁltering high stopband attenuation. furthermore approach employs dual-signal comparison improve measurement precision signals order magnitude explained described section pulse reference signals best used trigger events wherefore signal amplitude must exceed deﬁned threshold. check adc-based system sample’s value could compared said threshold. however na¨ıve approach would provide time resolution limited inverse sample rate simple described section ii-a possesses binary high/low information pulse signal. contrast sampled version pulse holds valuable amplitude information used interpolate exact location signal edge exceeding threshold level. coarsely locate rising/falling edge applying schmitt-trigger input signal native sample rate. provides observation window conﬁgurable number samples. fig. real-mode baseband chain typical direct-conversion receiver. note processing complex input data separate performed. decimator block uses low-pass ﬁltering downsampling adjust output sample rate adcs’ sample rate ﬁxed. single lines denote real-valued signals whereas double lines indicate complex signals. simultaneously measure reference signal types synchronous channels directly accessed required. preferably also supports real-mode baseband depicted figure regardless choice speciﬁc platform expect suggested measurement technique applicable wide range devices even limited sdrs since algorithms described section hardware-agnostic. however widespread availability sdrs builtsupport primitives makes prime platform implementation enabling comparatively cheap easy handle hardware solution. universal software radio peripheral developed ettus research constitutes ﬂexible platform actively used within academic community wide variety communication measurement scenarios. entry level usrp costs less features dual-channel dual-channel interfaced fpga. although equipped various front-ends called daughterboards lfrx board enables direct baseband access dual-channel -bit also implementing chain illustrated figure implemented using coordinate rotation digital computer ﬁxed-point algorithm decimator relies upon cascaded integrator comb ﬁlter ﬁnal two-stage halfband finite impulse response ﬁlter steepen overall frequency response. combined ﬁlters enable integer decimation factors uses gigabit ethernet connection stream sampled data personal computer serving measurement host. link’s maximum data rate insufﬁcient transfer adc’s mega samples second data stream necessitating minimal decimation factor single unsynchronized usrp sufﬁcient measure signal type. however sine pulse signals evaluated depicted figure dual usrp setup must employed reach required count coherently sampled channels. rely multiple-input multiple-output cable achieve inter-device clock synchronization strict synchronicity required signals compared across usrps. signals type sampled dual-channel improve sampling coherency. fig. schematic usrp hardware setup required measure sine pulse signals devices test evaluate signal type single unsynchronized usrp sufﬁcient. actually strict synchronicity required cross-device signal comparison desired. real-time measurement software implemented signiﬁcantly reduce amount data need stored disk compared off-line processing implementation. latter would require mbyte/s data stream stored sine signal processing real-time implementation sine algorithm described section iii-a supported usrp’s engine minimal programming effort host required conﬁgure down-conversion decimation blocks appropriately. although down-conversion decimation ﬁlter algorithms implemented -bit ﬁxed-point arithmetic ﬁlter offers little stopband attenuation therefore implemented single-precision ﬂoating-point down-conversion fir-based decimation host implementations directly compared additionally host decimator used conjunction fpga decimation factor higher latter’s limit desired. host implemented programming language optimized using single instruction multiple data vector extensions modern processors. enables real-time processing ms/s providing better stop band attenuation low-pass ﬁlter. since interleaved data streams must processed parallel vectorization realized efﬁciently. host decimator supports compiletime conﬁguration stage count decimation factors coefﬁcients target sample rate chosen according scenario. measurements default stages decimation factor chosen trade-off resulting bandwidth data rate enable long-term measurements without losing high-frequency phase noise information. pulse signal processing pulse algorithm section iii-b cannot implemented board usrp withsigniﬁcant modiﬁcation fpga code. avoid timeconsuming intricate fpga development implemented algorithm host using double-precision ﬂoatingpoint arithmetic low-pass interpolation factor single instruction multiple data optimization effort undertaken since interpolation performed limited number samples depending pulse signal’s tperiod. finally interpolation result stored disk resulting negligible data rate minimal storage volume. software implementation usrp device family supported wide variety software development systems including labview matlab radio. however lack important feature vital synchronized multiusrp measurements. user datagram protocol used sample transport usrp host unreliable transport layer protocol prone packet loss. packet loss occurs affected samples lost leave zero-length sample stream causing multiple streams out-of-sync. based usrp hardware driver library. packet loss detected stream zero-padded appropriately ensure gap-free sample stream. using zero-copy ring buffer sample stream accessed multiple threads distributing load sample reception processing also relaxes real-time processing requirements ring buffer allows considerable data processing delay. reduce likelihood packet loss employ customized minimal linux system optimized network interface settings successfully demonstrated zero packet loss within week continuous measurement laptop real-time usrp software performs limited pre-processing data reduction actual evaluation performed separate post-processing step. approach chosen order evaluate recorded data multiple ways. implemented post-processing focuses examined references’ relative long-term drift. first downmixed sine signal data passed additional high-attenuation decimators reduce sample rate sample second. subsequently phase difference sine signals computed using complex division unwrapped translated time error allan variance standard statistical analysis method used ﬁeld frequency time metrology description random instabilities discrimination various modulated noise types occur oscillators unfortunately design makes immune constant offset linear drift detrimental absolute relative synchronization measurement devices. insufﬁcient allan variance synchronization-speciﬁc characteristics oscillator considered. therefore determine long-term drift signal types order polynomial applied. resulting estimated linear drift used adjust frequency standards usually provide mechanism slightly tune generated frequency. complementary linear drift estimation savitzky-golay ﬁlters apply least-squares moving-window arbitrary-order polynomial ﬁtting input data smoothing according chosen window length polynomial order. additionally polynomial used differentiate input data rely upon ascertain short-term drift time laptop form factor chosen build compact measurement setup suitable mobile e.g. outdoor gpsdo measurements. equipped processor random access memory gigabit ethernet network interface. setup chose widely used reference signal types i.e. sine signals. determine precision system generally residual timedifference identical signals measured generated power-splitting single signal figure shows modiﬁed setup used following measurements. inputs usrps kept half-scale level avoid distortion ensure good signal-to-noise ratio fig. reference measurement setup. using tee-connectors usrp receives virtually identical input signals zero drift. exploited evaluate setup’s inherent measurement accuracy. compare performance sine implementations described section iv-b made multiple hour measurements different decimation factors ndecim computed residual complex signal division seen table host-based decimation outperforms fpga-based alternative high decimation factors. good agreement another hour measurement compares allan deviation decimators ndecim evaluate measurement system’s precision long-term stability continuous -hour measurement taken. resulting measurement data evaluated described section iv-c hour savitzky-golay window length. fig. signal reference measurement results. figure shows time error linear drift time error histogram normal distribution savitzky-golay ﬁltered time error savitzky-golay differentiated short-time drift latter speciﬁed parts-per-quadrillion section iv-c time error drift deﬁnitions. note minimal linear drift standard deviation figure depicts signal measurement results. although signiﬁcantly worse values time error resolution still excellent considering high level interpolation applied ms/s input data fig. allan deviation fpga-based host-based decimators ndecim hour measurement. allan deviation displayed better readability curves’ slope difference continue least fig. signal reference measurement results. figure shows time error linear drift time error histogram normal distribution savitzky-golay ﬁltered time error savitzky-golay differentiated short-time drift latter speciﬁed parts-per-quadrillion section iv-c time error drift deﬁnitions. note negligible linear drift standard deviation figure illustrates signal measurement results. despite data’s erratic appearance histogram reveals normal distribution. time error resolution outstanding accuracy corresponds phase angle resolution seconds arc. results likely explained tremendous level decimation i.e. averaging applied analog input signals. concluded table signal types’ time errors show comparatively high average value. since constant difference irrelevant intended drift measurements investigate possible sources. however different propagation delays likely explanation since correspond coax cabling. direct comparison synchronization-centric point view dmtd systems solution would highly interesting. however dmtd hardware disposal necessitating limit comparison published standard performance data i.e. allan variance standard deviation respectively. regrettably rules long-term stability considerations equivalent coding line four-phase clock time coding line multi-edge coding independent coding lines equivalent coding line low-pass linear interpolation instead specialized dmtd gear general purpose laboratory measurement hardware relied upon reference signal analysis. identiﬁed devices used long-term stability comparison namely rohde schwarz fsup signal source analyzer tektronix digital sampling oscilloscope. similar devices available well-equipped laboratory although results units likely vary. signal analyzer rohde schwarz fsup combines phase noise testing spectrum analysis features single class device. supports various phase noise measurement scenarios including measurement devices test other required comparison solution. double measurement mandates control least oscillator’s frequency supplying tuning voltage typical voltage controlled oscillators however reference signal generators cannot tuned like vcos fsup fails lock phase detector without tuning control. unfortunately fsup enable comparison reference signal generators supported system. although fsup solicited phase noise tester assume case envisioned intended designers unfortunate considering device’s cost. consequently split-signal measurement characterize device’s precision possible either. digital sampling oscilloscope tektronix channel giga samples second digital sampling oscilloscope analog bandwidth. class device various built-in measurement features including required measure phase difference sinusoidal signals time difference edges pulse signals. thus supports features required comparison system box. realized split-signal measurement figure using single instead synchronized usrp dpo’s channels used measurement operated full bandwidth maximum time resolution measurement channels band-limited suppress wide-band noise. order gain insight dpo’s measurement abilities compared different conﬁgurations hours each signal figure uses allan variance compare signal measurement performance multiple dmtd systems. although measurement performs slightly worse analog dmtd systems small outperforms results sherman j¨ordens directly comparable employ maximum likelihood timedomain optimization algorithm determine instantaneous frequency assuming linear phase drift variable observation window approach reduces signal’s wideband noise therefore improves signal-to-noise ratio decreasing allan variance. spectral characteristics signal instantaneous frequency constant within entire window. particularly long observation durations constant cannot unconditionally assumed. avoid distortions using spectrumpreserving post-processing prior computation allan variance i.e. low-pass decimation relatively high cut-off frequencies additionally investigation decimation host using ﬂoatingpoint arithmetic shows precision gain sherman’s usrp’s built-in ﬁxed-point therefore consider algorithm general accurate approach. fig. allan deviation different measurement systems namely three dmtd systems unknown dmtd system used comparison sherman sdrbased systems. note solutions perform comparably dmtd hardware. sherman’s results post-processed using averaging interval therefore results comparable signal table lists standard deviations multiple implementations capable measurement mostly taken comparison published szplet performance system comparable fpga-borne solutions however entirely software-based therefore avoids integration effort required build measurement system using fpga hardware. since ﬁrst publish solution references sdrbased measurements available comparison. fig. allan deviation signal long-term measurements. usrp outperforms orders magnitude. note dual-channel measurement enables slight improvement quad-channel counterpart. internally interleaving adcs double sample rate potential cost increased noise jitter. seems quite impressive inexpensive outperforms provides times analog bandwidth times sample rate. facilitated versatility software deﬁned radio platform allowing implement customized algorithms achieve vast precision gains. also proves algorithm’s combination low-pass linear interpolation well suited precise estimation signal edges. analysis reference signals based commercial off-the-shelf software deﬁned radio hardware. platforms quite common research laboratories seems likely also instrumentation costefﬁcient way. paper described analyze stability sine pulse reference signals basis universal software radio peripheral ettus research llc. sine reference signals digitally down-converted baseband analysis phase deviations. purpose out-of-the-box algorithms natively provided common sdrs used basis. extension demonstrated precision digital signal processing chain simultaneous measurement signals enabled setup. full quad-channel sample rate gs/s observation window fold interpolation trade-off signal types’ precision. employed built-in phase and/or delay measurement features read values ethernet using vxi- protocol yielding exactly measurement second using signal trigger dso. table lists standard deviation mean linear drift measurements outlined above well usrp results table comparison. different cables used measurements different values non-signiﬁcant subject calibration anyway. linear drifts smaller corresponding values therefore negligible. additional statistical comparison measurements figure illustrates allan variances. similarly values usrp measurement setup outperforms orders magnitude. although uses times sample rate usrp advantage nulliﬁed dpo’s substantial measurement dead-time higher noise bandwidth compared usrp. although allan variation usually relied upon characterize sinusoidal oscillators also statistically compare measurements here usrp much closer usrp still leads factor curiously dpo’s precision deteriorates switching gs/s gs/s. could caused note although supports multiple measurements second refreshes value display twice interval. curiously limitation applies vxi- value readout. therefore attempt increase sample rate dual-channel measurement using external trigger signal faster pps. measurements signal must used trigger anyway. improved custom software running host using ﬂoating-point arithmetic connection single instruction multiple data vector extensions modern processors real-time performance provided even moderate hardware. analysis pulse reference signals realized software trigger running host precisely locates trigger event time i.e. slope passes certain threshold. clearly limited sample rate adequate postprocessing needed. therefore low-pass interpolation increasing sample density applied followed linear interpolation ascertain fractional sample index trigger event. using usrp sdr-platform measurement precision obtained reference signals respectively order magnitude compared state-of-the-art methods dual mixer time difference method time interval counter furthermore joint individual measurements signals digital sampling oscilloscope showed proposed inexpensive sdrbased approach outperforms high-grade laboratory equipment orders magnitude phase estimation factor edge detection. also less bulky cheaper power efﬁcient. proposed sdr-setup used e.g. check integrity rather calibration reference sources other. suitable even long-term measurements inherently provides consistent storage data. similar sdr-based approach recently proposed sherman j¨ordens analysis sine signals only. however sdr-based system capable joint sine pulse reference signal analysis found literature far. szplet sondej grzeda subpicosecond-resolution time-todigital converter multi-edge coding independent coding lines ieee international instrumentation measurement technology conference proceedings mochizuki uchino morikawa frequency-stability measurement system using high-speed adcs digital signal processing ieee transactions instrumentation measurement vol. andrich ihlow kotterman beuster galdo using software deﬁned radios baseband phase measurement frequency standard calibration ieee international instrumentation measurement technology conference sojdr cermak brida comparison high-precision frequency-stability measurement systems ieee international frequency control symposium exhibition jointly european frequency time forum proceedings szplet kwiatkowski jachna r´o˙zyc eight-channel .-ps precision timestamps-based time interval counter fpga chip ieee transactions instrumentation measurement vol.", "year": "2018"}