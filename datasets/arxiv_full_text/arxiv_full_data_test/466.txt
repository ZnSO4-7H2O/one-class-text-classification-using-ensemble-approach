{"title": "Automatic detection and decoding of honey bee waggle dances", "tag": "q-bio", "abstract": " The waggle dance is one of the most popular examples of animal communication. Forager bees direct their nestmates to profitable resources via a complex motor display. Essentially, the dance encodes the polar coordinates to the resource in the field. Unemployed foragers follow the dancer's movements and then search for the advertised spots in the field. Throughout the last decades, biologists have employed different techniques to measure key characteristics of the waggle dance and decode the information it conveys. Early techniques involved the use of protractors and stopwatches to measure the dance orientation and duration directly from the observation hive. Recent approaches employ digital video recordings and manual measurements on screen. However, manual approaches are very time-consuming. Most studies, therefore, regard only small numbers of animals in short periods of time. We have developed a system capable of automatically detecting, decoding and mapping communication dances in real-time. In this paper, we describe our recording setup, the image processing steps performed for dance detection and decoding and an algorithm to map dances to the field. The proposed system performs with a detection accuracy of 90.07\\%. The decoded waggle orientation has an average error of -2.92{\\deg} ($\\pm$ 7.37{\\deg} ), well within the range of human error. To evaluate and exemplify the system's performance, a group of bees was trained to an artificial feeder, and all dances in the colony were automatically detected, decoded and mapped. The system presented here is the first of this kind made publicly available, including source code and hardware specifications. We hope this will foster quantitative analyses of the honey bee waggle dance. ", "text": "waggle dance popular examples animal communication. forager bees direct nestmates profitable resources complex motor display. essentially dance encodes polar coordinates resource field. unemployed foragers follow dancer’s movements search advertised spots field. throughout last decades biologists employed different techniques measure characteristics waggle dance decode information conveys. early techniques involved protractors stopwatches measure dance orientation duration directly observation hive. recent approaches employ digital video recordings manual measurements screen. however manual approaches time-consuming. studies therefore regard small numbers animals short periods time. developed system capable automatically detecting decoding mapping communication dances real-time. paper describe recording setup image processing steps performed dance detection decoding algorithm dances field. proposed system performs detection accuracy within range human error. evaluate exemplify system’s performance group bees trained artificial feeder dances colony automatically detected decoded mapped. system presented first kind made publicly available including source code hardware specifications. hope foster quantitative analyses honey waggle dance. honey waggle dance popular communication systems animal world. forager bees move stereotypic pattern honeycomb share location valuable resources nestmates dances consist waggle return phases. waggle phase dancer vibrates body side side moving forward rather straight line vertical comb surface. waggle phase followed return phase dancer circles back starting point waggle phase. clockwise counterclockwise return phases alternated dancer describes path resembling figure eight average orientation successive waggle runs respect gravity approximates angle advertised resource solar azimuth seen hive duration waggle correlates distance hive resource resource’s profitability encoded dance tempo valuable resources signaled shorter return runs yielding higher waggle production rate figure correlation waggle dance parameters locations field. left three food sources field located counterclockwise clockwise respect azimuth. right representation waggle dance paths surface vertical honeycomb. unemployed foragers might become interested waggle dance follow dancer’s movements decode information contained dance. followers exit hive search communicated resource location field recruits able locate resource back hive also dance thereby amplifying collective foraging effort. study waggle dance abstract form communication received great interest first described frisch keeping colonies special hives observation well-established. complex dance behavior allows insights many aspects honey biology even seven decades several research fields investigate waggle dance communication system. dance essentially contains polar coordinates field location. hence waggle dances mapped back field directional component relies fixed reference systems gravity sun’s azimuth therefore straightforward compute dance observation. honeybees integrate optical flow perceive along foraging routes gauge distance flown several factors affect amount optical flow perceived wind density objects environment vegetation buildings. honeybees calibrate odometer environment engaging foraging activities. hence convert waggle durations feeder distances system requires calibration itself. bees must trained number sample locations known distance. assuming homogeneous object density directions sufficient simple conversion factor obtained foragers environment establishing distribution dance-communicated locations. couvillon flower-rich areas affects honey foraging balfour ratnieks used find opportunities maximizing pollination managed honey colonies. mapping application decoding dances. theoretical biologists studied information content dance accuracy precision bees represent spatial information waggle dances landgraf co-workers tracked honey dances video recordings build motion model dancing honey robot studies honey collective foraging also focus waggle dance including studies model collective foraging nest-site selection behavior automatically decoded waggle dances part integrated solution automatic long-term tracking activity inside hive. different techniques used time decode waggle dances. first decades followed frisch’s discovery dances analyzed real time directly observation hive help protractors stopwatches throughout last decade digital video become ubiquitous extract encoded information computers. digital video allows researchers analyze dances frame frame extract characteristics either manually using screen virtual observation hive assisted computer software although digital video recordings allow measurements higher accuracy precision decoding communication dances continued manual time-consuming task. accelerate dance decoding process. first group solutions focused mapping bees’ trajectories tracking algorithms trajectories might analyzed extract specific features waggle orientation duration using either generic classifier trained dances methods based hand-crafted features specific spectral composition trajectory short window although method described feldman balch could potentially automatic detector decoder dances implementation limited automatic labeling behaviors. propose solution detect decode waggle dances automatically. since information known carried dances inferred waggle characteristics algorithm exclusively detects portion dance directly video stream avoiding separate tracking stage. system detects waggle runs false positive rate compared human observer solution used either online live streaming video offline recorded videos. software requires frame rate approximately resolution least pixels millimeter. thus qvga resolution suffices cover whole surface deutschnormal frame four frame corners used reference rectify distortions caused skewed viewing angles camera rotations; frame corners captured camera necessary consider carnica). used frame observation hive modified pseye camera side. camera low-cost model offers frame rates qvga resolution using alternative driver lighting setup necessary constant light source leds. pulsed light sources fluorescent lamps introduce flicker video yielding suboptimal detection results. setup illuminated array infrared ir-led clusters entire structure enveloped highly reflective foil small embossments light dispersion. clusters pointed towards foil create homogeneous ambient lighting reduce reflections glass panes. built block pseye cameras removed make sensitive. relation site properties dance properties recorded systematic experiments following equations used approximate inverse mapping dance parameters site properties. average waggle duration function approximates calibration curve here simple linear mapping empirically determined conversion factor. angle resource solar azimuth corresponds average orientation waggle runs respect vertical even number consecutive runs avoid errors divergence angle resource’s profitability proportional ratio average waggle duration average return duration dances high-quality resources contain shorter return runs less profitable resources located distance hence yielding higher value communication dance three measurements required average waggle duration average orientation average return duration contrast approaches require tracing dance path analyze extract characteristics propose algorithm directly analyzes video frames obtain waggle run’s starting timestamp duration angle. approach return durations calculated time difference waggle beginning next software consists four modules executed sequence namely attention module filter network waggle orientation module mapping module runs real-time stores small subregions video containing waggle-like activity. later false positives filtered using convolutional neural network extracts duration angle waggle runs. finally mapping module clusters waggle runs belonging dances maps back field coordinates. modules offline video recordings. long observations however require large storage space. therefore propose using real-time camera input reduce amount stored data drastically. detailed description four modules given following sections. waggle frequency dancing bees lies within particular range call waggle band consistent lighting conditions body well discriminable background; therefore brightness dynamics pixel image originates either honey activity sensor noise. thus pixel intersects dancing intensity time-series function texture pattern motion dynamics. indeed using camera spatial resolution bees appear homogeneous ellipsoid blobs without surface texture. thus brightness pixels crossed waggling bees varies periodic waggle motion frequency spectrum time series exhibits components waggle band harmonics. detect general feature define binary classifier referred detector pixel position associated dij. analyzes intensity evolution pixel within sliding window width purpose last intensity values pixel stored vector time described intensity value pixel time calculate score time series using number sinusoidal basis functions principle similar discrete fourier transform minn frequencies waggle band. least frequencies waggle band scores defined threshold computing scores clustered together following hierarchical agglomerative clustering approach using metric euclidean distance pixels threshold dmax half body length honey bee. clusters formed less cmin discarded noise-induced centroids remaining clusters regarded positions potential dancers. positions found clustering step used detect waggle runs positions detected successive frames located within maximum distance dmax defined according average waggle forward velocity positions considered belonging iteration dancer positions matched open candidates either appended candidate used basis one. candidate remain open gmax frames without detections added. detections could added closed. closed candidates minimum cmin detections retrieved wrs. finally coordinates potential dancer along pixels image snippets sequence stored disk. long term observations propose using filter relevant activity camera stream real-time. significantly reduces disk space otherwise required store full sized videos. depending task hand might e.g. advisable configure module never miss dance. higher sensitivity however might come higher number false detections. use-case trained convolutional neural network processes sequence images discard non-waggles. scalar output network thresholded predict whether input sequence contains waggle dance. network convolutional network whose convolution pooling layers extended i.e. temporal dimension network architecture three convolutional fully connected layers rather simple suffices filtering tasks days. training subsequences consisting frames randomly sampled detections mini-batch. detections less frames padded constant zeros. twenty percent manually labeled data reserved validation. reduce overfitting sequences randomly flipped horizontal vertical axes training. used adam optimizer train network achieved accuracy validation set. corresponds recall precision. duration estimated number frames exported orientation computed separate processing step referred orientation module usually performed offline keep computing resources free detecting waggle runs. dancing bees move particularly fast waggle runs throwing body side side frequency images resulting subtracting consecutive video frames waggling bees exhibit characteristic pattern similar gabor filter positive peak next negative peak whose orientation aligned dancer’s body figure difference image fourier transformation. image resulting subtracting consecutive video frames waggling bees exhibits characteristic gabor filter-like pattern. peak location varies image space along dancer’s position representation fourier space location-independent showing distinctive peaks frequencies related size distance gabor-like pattern. fourier transformation difference image provides location-independent representation waggling event preserving information regarding dancer’s orientation make fourier slice theorem states fourier transform projection original function onto line angle slice fourier transform angle. imagine line orthogonal dancer’s orientation. project gabor-like pattern onto line obtain clear sinusoidal pattern appears strong pair maxima fourier space angle. difference images given image sequence exhibit gabor pattern appears quickly moving laterally. robust estimate waggle orientation fourier transformed difference images apply bandpass filter obtain correct maxima locations bandpass filter performed frequency domain multiplying difference-of-gaussians dog. radius ring needs tuned expected frequency sinusoidal projection gabor pattern. frequency depends frame rate image resolution lateral velocity compute displacement pixels using approximate value expected frequency figure filtering cumulative difference images fourier space. cumulative fourier transformed difference images waggle exhibit strong pair maxima locations orthogonal dancer’s orientation. kernel mexican type properly adjusted waggle band used bandpass filter. bandpass filtering cumulative sums emphasizes values within frequencies interest. orientation waggle obtained resulting image principal component analysis however principal direction reflects direction dancer’s lateral movements necessary direction obtain dancer’s body axis. axis represents possible waggle directions. disambiguate alternatives process detector positions extracted image positions represents average pixel position found brightness changes waggle band. typical waggle sequence points trace roughly path dancer. average positions first waggle sequence compute positions relative average. search maximum values histogram orientation vectors average direction robust estimate main direction detector sequence. direction used disambiguate possible directions extracted pca. waggle dances encode polar coordinates field locations. coordinates back field implemented series steps referred mapping module reads output essentially time location duration orientation detected waggle run. then waggle runs clustered following approach similar case clustering process carried three-dimensional data space defined axes comb surface third axis time occurrence. represented data space coordinates based comb location time occurrence maintain coherence spatial temporal values time occurrence represented fourth seconds relative beginning day. process value threshold based average drift average time consecutive consider clusters minimum waggle runs actual dances then random sample consensus find outliers distribution waggle orientations. waggle duration orientation averaged inliers translated field locations. mean waggle duration translated meters using conversion factor orientation translated field reference azimuth time dance. duration-to-distance conversion factor empirically determined averaging durations waggle runs advertising known feeder evaluate distance decoding accuracy video sequences containing total wrs. videos recorded another research question using different hardware duration exported compared manually labeled ground truth. found overestimated durations average filtered attention module filter network respectively. eight coworkers defined correct waggle orientation waggle runs. custom user interface allowed tracing line best fits dancer’s body reference angle waggle defined average eight manually extracted angles. performed average error close observed human-generated data illustrate cases automatic decoding waggle dances mapped dances detected system period hours. data collected honey colony kept constant observation summer group foragers colony trained artificial feeder placed southwest hive. depicts distribution coordinates converted dances system detected. color saturation circle encodes number waggle runs associated since bees allowed forage food sources detected dances point towards artificial feeder. however detected dances cluster around feeding site. averaging direction dances obtained precise match artificial feeder’s direction angular error select dances interval around feeder direction obtain angular deviation figure detected dances mapped back field. average duration orientation four waggle runs dance translated field coordinate. spots’ color saturation denotes number waggle runs dance white corresponding dances four waggle runs deep purple maximum number linear mapping used convert waggle duration distance hive. hive feeder positions depicted green triangle respectively. dashed line represents average direction dances presented first automatic waggle dance detection decoding system. open source available free. require expensive camera hardware works standard desktop computers. system used continuously investigated possible error sources visually inspected waggle runs decoded large error. outlier detection step find several waggle orientations decoded error. orientation waggle runs test incorrectly flipped. flip error corrected mapping module clustering waggle runs dances removing angular outliers ransac. outliers removed system performs average error waggle level. process discard dances strong mode waggle orientation distribution theoretically therefore possible undiscarded dances contain flipped waggle runs. short durations i.e. almost forward motion visible. forward motion central feature orientation reader module used disambiguate direction. recognizing anatomical features dancing head abdomen could help reducing common error. falling costs better camera computing hardware mind however think that although bees don’t move forward wagging using higher spatial resolution likely resolve detection decoding errors described. operation i.e. prerecorded videos. found systematic error ignored properly calibrated system. standard deviation waggle duration error found result highly depends choice threshold value determined default value empirically optimal waggle detection accuracy. explicitly optimize parameter accurate distance decoding. runs. neither internal calibration external factors influence bee’s perception optical flow assessable. hence calibrated system collective calibration colony observation extracted waggle runs given high accuracy method projected dances exhibit large spread? inspected random samples found dances advertised feeding site. thus vector endpoint distribution shows smaller clusters likely represent natural food sources. variation dance points around feeding site correctly reproduced large part variation originating animals themselves. imprecision well-know caused waggle runs missing correct direction alternating sign. difference consecutive waggle runs divergence surprisingly large studied previously divergence correlates negatively distance advertised goal i.e. largest short distances. previous work analyzed dances distant food source tracked motion dancers corrected tracker manually whenever necessary computed distribution waggle directions waggle runs. found although average waggle orientation result obtained present study. average direction dances matches direction feeding station closely standard deviation spread dance endpoints however smaller integration least four waggle runs also contain short waggle portions. although system able detect these waggle oscillation unreliable feature round dances. therefore explicitly focus waggle dances. note sharp cutoff dance detections close hive stems still features missing might added future. mapping module e.g. extract visualize profitability food source. could e.g. calculate return duration clustering step color coding scheme encode information map. dances also exhibit systematic angular error depends waggle orientation comb representation data space values axes defined comb location axis time occurrence. within maximum euclidean distance dmax clustered together regarded dances. authors thank halilovic lojewski witte contribution support conducting experiments development system. work funded part german academic exchange service", "year": "2017"}