{"title": "A New Understanding of Prediction Markets Via No-Regret Learning", "tag": ["cs.AI", "cs.LG"], "abstract": "We explore the striking mathematical connections that exist between market scoring rules, cost function based prediction markets, and no-regret learning. We show that any cost function based prediction market can be interpreted as an algorithm for the commonly studied problem of learning from expert advice by equating trades made in the market with losses observed by the learning algorithm. If the loss of the market organizer is bounded, this bound can be used to derive an O(sqrt(T)) regret bound for the corresponding learning algorithm. We then show that the class of markets with convex cost functions exactly corresponds to the class of Follow the Regularized Leader learning algorithms, with the choice of a cost function in the market corresponding to the choice of a regularizer in the learning problem. Finally, we show an equivalence between market scoring rules and prediction markets with convex cost functions. This implies that market scoring rules can also be interpreted naturally as Follow the Regularized Leader algorithms, and may be of independent interest. These connections provide new insight into how it is that commonly studied markets, such as the Logarithmic Market Scoring Rule, can aggregate opinions into accurate estimates of the likelihood of future events.", "text": "estimates proved quite accurate practice wide variety domains. impressive assortment examples.) theory rational expectations equilibria oﬀers insight prediction markets general converge accurate prices plagued strong assumptions no-trade theorems furthermore theory says nothing particular prediction market mechanisms hanson’s increasingly popular logarithmic market scoring rule might produce accurate estimates others practice. work provide additional insight learning power particular market mechanisms highlighting deep mathematical connections prediction markets no-regret learning. come surprise connection prediction markets learning. theories markets learning built upon many fundamental concepts proper scoring rules bregman divergences. knowledge chen ﬁrst formally demonstrate connection showing standard randomized weighted majority regret bound used starting point rederive well-known bound worst-case loss lmsr marker maker. used eﬃciently lmsr combinatorial outcome spaces betting rankings.) show section converse also true; weighted majority regret bound derived directly bound worst-case loss market maker using lmsr. however connection goes much deeper. section show cost function based prediction market bounded loss interpreted no-regret learning algorithm. furthermore loss market maker bounded bound used derive rithm. ides view trades made market losses observed learning algorithm. think market maker learning probability distribution outcomes treating observed trade training instance. section show class convex cost function based markets exactly corresponds class follow regularized leader learning algorithms weights chosen time step minimize combination empirical loss convex regularization term. allows interpret seabstract explore striking mathematical connections exist market scoring rules cost function based prediction markets no-regret learning. show cost function based prediction market interpreted algorithm commonly studied problem learning expert advice equating trades made market losses observed learning algorithm. loss market organizer bounded bound learning algorithm. show class markets convex cost functions exactly corresponds class follow regularized leader learning algorithms choice cost function market corresponding choice regularizer learning problem. finally show equivalence market scoring rules prediction markets convex cost functions. implies market scoring rules also interpreted naturally follow regularized leader algorithms independent interest. connections provide insight commonly studied markets logarithmic market scoring rule aggregate opinions accurate estimates likelihood future events. imagine interested learning accurate estimate probability united states unemployment rate particular month fall could choose spend hours digging news articles reading ﬁnancial reports weighing various opinions other eventually coming reasonably informed estimate. however could potentially save hassle appealing wisdom crowds. prediction market ﬁnancial market designed information aggregation. example cost function based prediction market organizer trades securities corresponding potential outcome event. market maker might oﬀer security pays united states unemployment rate january risk neutral trader believes true probability unemployment rate willing share security price similarly willing sell share security price reason current market price security viewed population’s collective estimate likely unemployment rate market scoring rules developed hanson method using scoring rules pool opinions many diﬀerent forecasters. market scoring rules sequentially shared scoring rules. formally market maintains current probability distribution time trader enter market change distribution arbitrary distribution choice. outcome turns receives payoﬀ proper scoring rule traders incentive change market’s distribution match true beliefs. idea traders update beliefs time based market activity market’s distribution eventually converge collective beliefs population. trader market scoring rule essentially responsible paying previous trader’s score. thus market maker responsible paying score ﬁnal trader. initial probability distribution market. worst case loss market maker cost function exhaustive outcomes event. based market market maker oﬀers security corresponding outcome security associated outcome pays happens otherwise. tion simply potential function describing amount money currently wagered market function quantity shares purchased. number shares security currently held traders trader would like purchase shares security trader while arbitrary market scoring rules lmsr distributions place weight outcome allowed requires trader inﬁnite amount money outcome reported probability actually happens. dynamic parimutuel market falls outside framework since winning payoﬀ depends future trades. lection cost function market selection regularizer learning problem. furthermore prove equivalence another common class prediction markets market scoring rules convex cost function based markets immediately implies market scoring rules interpreted follow regularized leader algorithms too. connections provide insight prediction markets tend yield accurate estimates practice. recent years variety compelling prediction market mechanisms proposed studied including standard call market mechanisms pennock’s dynamic parimutuel markets work focus broad classes mechanisms hanson’s market scoring rules cost function based prediction markets described chen pennock also brieﬂy discuss related class sequential convex parimutuel mechanisms section scoring rules long used evaluation probabilistic forecasts. context prediction markets elicitation scoring rules used encourage individuals make careful assessments truthfully report beliefs context machine learning scoring rules used loss functions evaluate compare performance diﬀerent algorithms implies ﬁnite whenever scoring rule said proper risk-neutral forecaster believes true distribution outcomes incentive report alternate distribution pisi distributions rule strictly proper inequality holds equality uses properties scoring rules extensive similar weaker correspondence market scoring rules cost function based markets discussed chen pennock agrawal formulation equivalent market scoring rule formulation sense trader changes market probabilities formulation receives payoﬀ every outcome trader changes quantity vectors cost function formulation. brieﬂy review problem learning expert advice. framework algorithm makes sequence predictions based advice experts receives corresponding sequence losses. goal algorithm achieve cumulative loss almost cumulative loss best performing expert hindsight. statistical assumptions made losses. indeed algorithms expected perform well even sequence losses chosen adversary. formally every time step every expert receives loss cumulative ℓit. algorithm maintains weight expert weights viewed distribution experts. algorithm witℓit interpreted expected loss algorithm would receive always chose expert follow according current distribution. cumulative unreasonable expect algorithm achieve small cumulative loss none experts perform well. such typical measure performance algorithm terms regret deﬁned diﬀerence ﬁrst condition ensures price security never negative. current price security associated outcome negative trader could purchase shares security guaranteed proﬁt. second condition ensures prices securities prices summed something less trader could purchase small equal quantities security guaranteed proﬁt. together conditions ensure arbitrage opportunities market. conditions also ensure current prices always viewed valid probability distribution outcome space. fact prices represent market’s current estimate probability outcome occur. following theorem gives suﬃcient necessary conditions cost function valid. properties cost functions discussed elsewhere fact suﬃcient necessary valid cost function important later analysis. such state full proof completeness. lemma quantiﬁes trade-oﬀ must considered choosing regularizer. range regularizer small weights change dramatically round next ﬁrst term bound large. hand range regularizer weights chosen true loss minimizers second term blow foundation place ready describe bounded loss market maker interpreted algorithm learning expert advice. idea equate trades made market losses observed learning algorithm. view market maker essentially learning probability distribution outcomes treating observed trade training instance. formally consider cost function based market maker instantaneous price functions outcome convert market maker algorithm learning expert advice setting weight expert time using first note valid cost function based prediction market setting weights equation entails valid expert learning algorithm. since prices valid prediction market must non-negative weights resulting algorithm guaranteed satisfy properties too. furthermore weights function past losses expert algorithm permitted observe. shown weights chosen weighted majority precisely minimize combination empirical loss entropic regularization term speciﬁcally weights time precisely minimize weighted majority example broader class algorithms collectively known follow regularized leader algorithms class algorithms grew following fundamental insight kalai vempala consider ﬁrst aptly named follow leader algorithm chooses weights time minimize witlit−. algorithm simply places weight single expert best performance previous examples. such algorithm highly unstable dramatically changing weights time step next. easy follow leader suﬀers regret worst case best expert changes frequently. example overcome instability kalai vempala suggested adding random perturbation empirical loss expert choosing expert minimizes perturbed loss. however general perturbation need random. instead adding random perturbation possible gain necessary stability adding regproof. setting weights equation essentially simulating market outcomes. denote number shares outcome purchased time step simulated market denote vector quantities note completely control since simply simulating market thus choose −ǫℓit since rit′ total number outstanding shares security time denoting vector weight assigned expert round learning algorithm corresponds instantaneous price security simulated market immediately round rederiving weighted majority bound chen showed weighted majority regret bound used starting point rederive worst case loss lmsr market maker. show converse also true; applying theorem rederive weighted majority bound bounded market maker loss lmsr. regret bound obtained depends trade-oﬀ between market maker loss quickly prices change. show bound used rederive standard regret bound weighted majority converse result chen order derive regret bound learning algorithm deﬁned equation necessary make restrictions quickly prices market change. market prices change quickly resulting learning algorithm unstable suﬀer high worst-case regret case naive follow leader algorithm described section capture idea introduce notion φ-stability deﬁned follows. deﬁning φ-stability terms allows quantify slowly prices change even price functions diﬀerentiable points. derive regret bound resulting learning algorithm using following simple lemma. lemma states quantity vector market price functions φ-stable amount money market maker would collect purchase small quantity security amount market maker would collected instead priced shares according ﬁxed price lemma place ready derive regret bound. following theorem assumed known priori therefore used known advance standard doubling trick applied idea behind doubling trick partition time periods exponentially increasing length restarting algorithm period. leads similar bounds extra factor log. creasing monotonicity satisﬁes increasing monotonicity satisﬁes negative translation invariance satisﬁes positive translation invariance. furthermore convex convex. theorem implies valid convex cost function convex risk measure. ﬁrst half lemma follows immediately representation theorem f¨ollmer schied piqi− deﬁne closed convex feasible set. thus piqi respect global optimal solution ﬁrst-order conditions necessary suﬃcient. denote optimal optimization problem. then ability represent valid cost function form allows deﬁne bound worst-case loss market maker terms penalty function corresponding convex risk measure. section establish formal connections among market scoring rules cost function based markets class follow regularized leaders algorithms. start representation theorem cost function based markets crucial later analysis. section show representation theorem convex cost functions. proof theorem relies connection convex cost functions class functions known ﬁnance literature convex risk measures ﬁrst noted agrawal convex risk measures originally introduced f¨ollmer schied model diﬀerent attitudes towards risk ﬁnancial markets. risk measure viewed mapping vector returns real number. interpretation vector returns preferred vector risk measure ﬁnancial interpretations properties important setting. interesting f¨ollmer schied provide representation theorem states function convex risk measure represented lower semicontinuous function referred penalty function. fact useful allows obtain following result alluded informally agrawal full proof included completeness. show mapping mildly restricted class convex cost function based markets mildly restricted class strictly proper market scoring rules every pair mapping equations hold. furthermore show markets satisfying equations equivalent sense described above. theorem one-to-one onto mapping between convex cost function based markets strictly convex diﬀerentiable potential functions class strictly proper regular market scoring rules diﬀerentiable scoring functions pair mapping equations hold. furthermore pair markets mapping equivalent prices outcomes positive proﬁt trade markets trade starts market prices results market prices prices outcomes positive trade. additionally every price vector achievable market scoring rule achievable cost function based market. proof. ﬁrst show function equation strictly convex diﬀerentiable scoring rule equation regular strictly proper diﬀerentiable. show equations equivalent. finally show equivalence markets. consider function equation since assumed diﬀerentiable diﬀerentiable too. additionally known scoring rule strictly proper expected value strictly convex strictly convex. subderivative respect /∂pj). immediately implies scoring rule deﬁned equation regular strictly proper scoring rule since strictly convex. also diﬀerentiable. described section logarithmic market scoring rule market maker deﬁned either market scoring rule cost function based market. lmsr unique regard. show section regular strictly proper market scoring rule diﬀerentiable scoring functions represented cost function based market. likewise convex cost function satisfying mild conditions corresponds market scoring rule. long market probabilities nonzero market scoring rule corresponding cost function based market equivalent. precisely trader changes market probabilities market scoring rule guaranteed receive payoﬀ every outcome trader changes quantity vectors cost function for~ mulation long every component nonzero. moreover price vector achievable market scoring rule ﬁnite achievable cost function based market. fact exists correspondence certain market scoring rules certain cost function based markets noted chen pennock pointed scoring function cost function based market cost function equivalent provide guarantees circumstances under condition satisﬁed. agrawal also made equivalence markets strong condition holds. result gives general precise conditions equivalent cost function based market. case proﬁt trader cost function based market market scoring rule market changes market probability finally observe using cost function based market possible achieve price vector ﬁnite scores setting lemma setting vector maximizes pisi. since strictly proper maximized since regular implies possible achieve prices interior probability simplex using cost function based market ﬁnite expression precisely form equation playing role regularizer controlling trade-oﬀ regularizer empirical loss. implies every convex cost function based prediction market interpreted follow regularized leader algorithm convex regularizer applying theorem lemma easily bound regret resulting algorithm follows. connections established previous section imply every strictly proper market scoring rule also interpreted ftrl algorithm strictly convex regularizer. conversely ftrl algorithm diﬀerentiable strictly convex regularizer viewed choosing weights time minimize quantity precisely cost function associated quadscpm market uniform prior previously known equivalent qmsr prices nonzero worst case loss market maker following argument section market corresponds ftrl algorithm regularizer observed using ftrl regularizer form equivalent online gradient descent thus theorem show regret bound gradient descent. demonstrated elegant mathematical connection market scoring rules cost function based prediction markets no-regret learning. connection thought-provoking yields interpretations well-known prediction market mechanisms. interpretation penalty function regularizer shed light market scoring rule cost function based market best diﬀerent assumptions traders. additionally connection potential design prediction market mechanisms learning algorithms. recent years interest ﬁnding ways tractably market scoring rules combinatorial inﬁnite outcome spaces example market maker might wish accept bets permutations boolean spaces real numbers case simply running naive implementation lmsr would infeasible. mentioned above exploiting connection weighted majority lmsr chen showed extension weighted majority algorithm permutation learning could used approximate prices lmsr perconnection hints market scoring rules convex cost function based markets able obtain accurate estimates probability distributions practice. types markets essentially learning distributions treating market trades training data. beyond that markets correspond well-understood learning algorithms stable weights guarantees regret. agrawal present another describing convex cost function based prediction markets call sequential convex pari-mutuel mechanism scpm deﬁned terms limit orders instead market prices underlying mathematics essentially same. scpm traders specify maximum quantity shares would like purchase maximum price share willing spend. market decides many shares trade accept solving convex optimization problem. agrawal show every scpm equivalent convex cost function based market. limit order number shares accepted market maker scpm minimum number shares requested trader number shares would take drive market price shares corresponding cost function based market limit price trader. thus results imply scpm mechanism also interpreted follow regularized leader algorithm learning expert advice. remark agrawal also describe interpretation scpm terms convex risk measures suggest associated penalty function related underlying problem learning distribution outcomes. however interpretation diﬀerent ours. view penalty function characterizing market maker’s commitment learning true distribution since impacts worst case market maker loss willingness market maker accept limit orders. contrary view penalty function regularizer necessary make market prices stable. previous section described relationship between market scoring rules cost function based markets convex cost functions follow regularized leader algorithms. discussed logarithmic market scoring rule represented equivalently cost function based market corresponds weighted majority expert learning setting. section illustrate relationship another example. particular show quadratic market scoring rule written equivalently cost function based market show market corresponds well-studied online gradient descent algorithm learning setting give bound regret algorithm using theorem mutations. given understanding connection markets learning growing literature no-regret algorithms large inﬁnite sets experts seems likely similar learning-based techniques could developed calculate market prices types large outcome spaces too.", "year": 2010}